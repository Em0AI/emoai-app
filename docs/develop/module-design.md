# æ¨¡å—è®¾è®¡æ–‡æ¡£

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº† EmoAI ç³»ç»Ÿçš„å„ä¸ªåŠŸèƒ½æ¨¡å—ã€å®ƒä»¬çš„èŒè´£ã€äº¤äº’æ–¹å¼å’Œå®ç°æ€è·¯ã€‚

---

## æ¨¡å—æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ç”¨æˆ·ç•Œé¢æ¨¡å— (UI Modules)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é¦–é¡µ    â”‚  èŠå¤©    â”‚  æ—¥è®°    â”‚  å…¬å…±  â”‚
â”‚ (Home)   â”‚ (Chat)   â”‚ (Diary)  â”‚(Common)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ä¸šåŠ¡é€»è¾‘æ¨¡å— (Business Logic)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ èŠå¤©é€»è¾‘ â”‚ æ—¥è®°é€»è¾‘ â”‚ æƒ…ç»ªåˆ†æé€»è¾‘      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æœåŠ¡æ¨¡å— (Services)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ AIæœåŠ¡   â”‚ æƒ…ç»ªæœåŠ¡ â”‚ æ—¥è®°ç”ŸæˆæœåŠ¡      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1. é¦–é¡µæ¨¡å— (Home Module)

### 1.1 æ¨¡å—èŒè´£
- å±•ç¤ºä¸‰ä¸ª AI è§’è‰²ï¼šç†æ€§åˆ†æå¸ˆã€æ¸©æŸ”å¯¼å¸ˆã€ç§¯æé™ªä¼´è€…
- æä¾›è§’è‰²é€‰æ‹©äº¤äº’
- è·³è½¬åˆ°å¯¹åº”è§’è‰²çš„èŠå¤©é¡µé¢

### 1.2 æ ¸å¿ƒç»„ä»¶

#### CharacterCard.vue
**ç›®æ ‡**ï¼šå•ä¸ªè§’è‰²å¡ç‰‡ç»„ä»¶

```typescript
interface Props {
  character: Character;
  isHovered?: boolean;
}

interface Emits {
  click: [character: Character];
}
```

**åŠŸèƒ½**ï¼š
- å±•ç¤ºè§’è‰²å¤´åƒã€åç§°ã€æè¿°
- é¼ æ ‡æ‚¬åœæ•ˆæœï¼ˆæ”¾å¤§ã€é˜´å½±ï¼‰
- ç‚¹å‡»äº‹ä»¶å¤„ç†

#### CharacterGrid.vue
**ç›®æ ‡**ï¼šè§’è‰²ç½‘æ ¼ç»„ä»¶

**åŠŸèƒ½**ï¼š
- å¸ƒå±€ä¸‰ä¸ªè§’è‰²å¡ç‰‡
- ç®¡ç†æ‚¬åœçŠ¶æ€
- å¤„ç†å¡ç‰‡ç‚¹å‡»äº‹ä»¶

#### é¡µé¢ï¼špages/index.vue
**åŠŸèƒ½**ï¼š
- é¦–é¡µä¸»é¡µé¢
- å¯¼èˆªæ æ˜¾ç¤º
- æ ‡é¢˜å’Œæè¿°æ–‡æ¡ˆ
- è§’è‰²ç½‘æ ¼
- è·³è½¬èŠå¤©é¡µé¢

### 1.3 äº¤äº’æµç¨‹

```
ç”¨æˆ·è®¿é—®é¦–é¡µ
  â†“
è¯»å–å‰ç«¯è§’è‰²åˆ—è¡¨ï¼ˆå¸¸é‡ï¼‰
  â†“
å±•ç¤ºä¸‰ä¸ªè§’è‰²å¡ç‰‡
  â†“
ç”¨æˆ·é¼ æ ‡æ‚¬åœ
  â†“
å¡ç‰‡æ”¾å¤§æ˜¾ç¤º
  â†“
ç”¨æˆ·ç‚¹å‡»å¡ç‰‡
  â†“
ä¿å­˜é€‰æ‹©çš„è§’è‰²åˆ° ChatStore
  â†“
è·³è½¬åˆ° /chat/[characterId]
```

### 1.4 æ•°æ®æ¥æº

**è§’è‰²é…ç½®** (src/constants/characters.ts)ï¼š
```typescript
import type { Character } from '@/types';

export const CHARACTERS: Record<string, Character> = {
  'rational-analyst': {
    id: 'rational-analyst',
    name: 'Rational Analyst',
    avatar: '/images/rational-analyst.png',
    description: 'Helps you think through challenges with logic and clarity'
  },
  'compassionate-mentor': {
    id: 'compassionate-mentor',
    name: 'Compassionate Mentor',
    avatar: '/images/compassionate-mentor.png',
    description: 'Provides warm, supportive guidance with understanding'
  },
  'encouraging-companion': {
    id: 'encouraging-companion',
    name: 'Encouraging Companion',
    avatar: '/images/encouraging-companion.png',
    description: 'Brings positive energy and motivation to your day'
  }
};

// ä¾¿æ·å‡½æ•°
export function getCharacterById(id: string): Character | undefined {
  return CHARACTERS[id];
}

export function getAllCharacters(): Character[] {
  return Object.values(CHARACTERS);
}
```

---

## 2. èŠå¤©æ¨¡å— (Chat Module)

### 2.1 æ¨¡å—èŒè´£
- å®ç°ç”¨æˆ·ä¸ AI çš„å®æ—¶èŠå¤©äº¤äº’
- ç®¡ç†èŠå¤©æ¶ˆæ¯å†å²
- å¤„ç†è¯­éŸ³è¾“å…¥
- è¿›è¡Œæƒ…ç»ªåˆ†æå’Œå®‰å…¨æ£€æµ‹
- æ˜¾ç¤ºå±æœºå¹²é¢„æç¤º

### 2.2 æ ¸å¿ƒç»„ä»¶

#### ChatWindow.vue
**ç›®æ ‡**ï¼šèŠå¤©çª—å£ä¸»å®¹å™¨

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºèŠå¤©æ¶ˆæ¯åˆ—è¡¨
- è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯
- åŠ è½½åŠ¨ç”»æ˜¾ç¤º
- æ¶ˆæ¯åˆ†é¡µåŠ è½½ï¼ˆå¯é€‰ï¼‰

#### ChatMessage.vue
**ç›®æ ‡**ï¼šå•æ¡èŠå¤©æ¶ˆæ¯

```typescript
interface Props {
  message: ChatMessage;
  characterName?: string;
}
```

**åŠŸèƒ½**ï¼š
- åŒºåˆ†ç”¨æˆ·æ¶ˆæ¯ï¼ˆå³ä¾§ï¼‰å’Œ AI æ¶ˆæ¯ï¼ˆå·¦ä¾§ï¼‰
- æ˜¾ç¤ºæ¶ˆæ¯å†…å®¹å’Œæ—¶é—´
- æ”¯æŒ Markdown æ¸²æŸ“ï¼ˆAI å›å¤ï¼‰
- æµå¼æ–‡æœ¬åŠ¨ç”»æ•ˆæœ

#### InputArea.vue
**ç›®æ ‡**ï¼šè¾“å…¥åŒºåŸŸ

**åŠŸèƒ½**ï¼š
- æ–‡æœ¬è¾“å…¥æ¡†
- è¯­éŸ³è¾“å…¥æŒ‰é’®
- å‘é€æŒ‰é’®
- è¾“å…¥éªŒè¯å’Œç¦ç”¨çŠ¶æ€
- æç¤ºè¯­æ˜¾ç¤º

#### VoiceRecorder.vue
**ç›®æ ‡**ï¼šè¯­éŸ³å½•åˆ¶ç»„ä»¶

**åŠŸèƒ½**ï¼š
- è°ƒç”¨æµè§ˆå™¨ MediaRecorder API
- æ˜¾ç¤ºå½•åˆ¶åŠ¨ç”»
- å½•åˆ¶å®Œåè¯­éŸ³è½¬æ–‡æœ¬
- å‘é€è¯­éŸ³è¯†åˆ«ç»“æœ

#### CharacterAvatar.vue
**ç›®æ ‡**ï¼šå·¦ä¾§è§’è‰²æ˜¾ç¤º

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºè§’è‰²å¤´åƒ
- æ˜¾ç¤ºè§’è‰²åç§°
- æ˜¾ç¤º"åˆ‡æ¢è§’è‰²"æŒ‰é’®
- å¤„ç†è§’è‰²åˆ‡æ¢é€»è¾‘

#### CrisisAlert.vue
**ç›®æ ‡**ï¼šå±æœºå¹²é¢„æç¤ºå¼¹çª—

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºå±æœºå¹²é¢„æ–‡æ¡ˆ
- 15 ç§’å€’è®¡æ—¶
- å–æ¶ˆæŒ‰é’®
- è‡ªåŠ¨è§¦å‘åº”æ€¥ç”µè¯ï¼ˆå¯é€‰ï¼‰

### 2.3 é¡µé¢ï¼špages/chat/[role].vue

**åŠŸèƒ½**ï¼š
- èŠå¤©é¡µé¢ä¸»ä½“
- æ•´åˆæ‰€æœ‰èŠå¤©ç»„ä»¶
- ç®¡ç†èŠå¤©çŠ¶æ€
- å¤„ç†è·¯ç”±å‚æ•°ï¼ˆè§’è‰² IDï¼‰
- åˆå§‹åŒ–æ¬¢è¿æ¶ˆæ¯

### 2.4 çŠ¶æ€ç®¡ç† (ChatStore)

```typescript
interface ChatState {
  // å½“å‰èŠå¤©æ•°æ®
  messages: ChatMessage[];             // å½“å‰ä¼šè¯çš„æ¶ˆæ¯åˆ—è¡¨
  currentCharacterId: CharacterId;    // å½“å‰é€‰æ‹©çš„è§’è‰² ID
  
  // UI çŠ¶æ€
  isLoading: boolean;                  // AI ç”Ÿæˆä¸­
  isRecording: boolean;                // è¯­éŸ³å½•åˆ¶ä¸­
  error?: string;                      // é”™è¯¯ä¿¡æ¯
  
  // å®‰å…¨çŠ¶æ€
  crisisAlertShown: boolean;          // å±æœºæç¤ºæ˜¯å¦æ˜¾ç¤ºè¿‡
}

interface ChatGetters {
  userMessages: ChatMessage[];        // æ‰€æœ‰ç”¨æˆ·æ¶ˆæ¯
  aiMessages: ChatMessage[];          // æ‰€æœ‰ AI æ¶ˆæ¯
  lastMessage?: ChatMessage;          // æœ€åä¸€æ¡æ¶ˆæ¯
  messageCount: number;               // æ¶ˆæ¯æ€»æ•°
  shouldAutoScroll: boolean;          // æ˜¯å¦åº”è¯¥è‡ªåŠ¨æ»šåŠ¨
}

interface ChatActions {
  addMessage(msg: ChatMessage): void;
  clearMessages(): void;              // ä¼šè¯ç»“æŸæ—¶æ¸…ç©º
  setCurrentCharacter(id: CharacterId): void;
  setLoading(loading: boolean): void;
  setRecording(recording: boolean): void;
}
```

**å­˜å‚¨ç­–ç•¥**ï¼š
- èŠå¤©è®°å½•ä»…åœ¨å†…å­˜ä¸­å­˜å‚¨ï¼ˆPinia storeï¼‰
- é¡µé¢åˆ·æ–°åè‡ªåŠ¨æ¸…ç©º
- ä¸éœ€è¦ localStorage æˆ–æ•°æ®åº“æŒä¹…åŒ–

### 2.5 ä¸šåŠ¡é€»è¾‘ (useChat)

**ä¸»è¦å‡½æ•°**ï¼š
```typescript
// å‘é€æ¶ˆæ¯
async function sendMessage(content: string): Promise<void>

// æ¥æ”¶ AI å›å¤ï¼ˆæµå¼ï¼‰
async function receiveAIReply(characterId: string, messages: ChatMessage[]): Promise<string>

// æƒ…ç»ªåˆ†æ
async function analyzeMessage(content: string): Promise<EmotionAnalysis>

// å±æœºæ£€æµ‹
function detectCrisis(text: string): boolean

// åŠ è½½èŠå¤©å†å²
function loadChatHistory(date: string): void

// ä¿å­˜èŠå¤©åˆ°æœ¬åœ°
function saveChatToLocal(): void
```

### 2.6 äº¤äº’æµç¨‹

#### åŸºæœ¬èŠå¤©æµç¨‹
```
ç”¨æˆ·è¾“å…¥æ–‡æœ¬
  â†“
éªŒè¯å†…å®¹ï¼ˆéç©ºã€é•¿åº¦é™åˆ¶ï¼‰
  â†“
æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯æ°”æ³¡
  â†“
è°ƒç”¨ AI æœåŠ¡è·å–å›å¤ï¼ˆæµå¼ï¼‰
  â†“
å®æ—¶æ˜¾ç¤º AI å›å¤æ–‡æœ¬
  â†“
åˆ†æç”¨æˆ·æ¶ˆæ¯æƒ…ç»ª
  â†“
æ£€æµ‹æ˜¯å¦åŒ…å«å±æœºä¿¡å·
  â”œâ”€ æ˜¯ â†’ æ˜¾ç¤ºå±æœºå¹²é¢„å¼¹çª—
  â””â”€ å¦ â†’ ç»§ç»­
  â†“
ä¿å­˜æ¶ˆæ¯åˆ° ChatStore
  â†“
æ›´æ–°æœ¬åœ°å­˜å‚¨
  â†“
æ›´æ–°å…¨å±€æƒ…ç»ªæ•°æ®
```

#### å±æœºå¹²é¢„æµç¨‹
```
æ£€æµ‹åˆ°æç«¯è´Ÿé¢è¡¨è¿°
  â†“
ç«‹å³æ˜¾ç¤ºå±æœºæç¤ºå¼¹çª—
  â†“
å¼€å§‹ 15 ç§’å€’è®¡æ—¶
  â†“
ç”¨æˆ·æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š
  â”œâ”€ ç‚¹å‡» Cancel â†’ å…³é—­å¼¹çª—ï¼Œç»§ç»­èŠå¤©
  â””â”€ å€’è®¡æ—¶ç»“æŸ â†’ æ‰“å¼€åº”æ€¥ç”µè¯æ‹¨å·
  â†“
ï¼ˆå¯é€‰ï¼‰æ‹¨æ‰“å½“åœ°åº”æ€¥ç”µè¯
```

---

## 3. æ—¥è®°æ¨¡å— (Diary Module)

### 3.1 æ¨¡å—èŒè´£
- ç”ŸæˆåŸºäºèŠå¤©çš„æƒ…ç»ªæ—¥è®°
- å±•ç¤ºæ—¥è®°åˆ—è¡¨å’Œè¯¦æƒ…
- å¯è§†åŒ–æƒ…ç»ªæ•°æ®ï¼ˆé›·è¾¾å›¾ï¼‰
- æä¾›æ—¥æœŸåˆ‡æ¢

### 3.2 æ ¸å¿ƒç»„ä»¶

#### DiaryList.vue
**ç›®æ ‡**ï¼šå·¦ä¾§æ—¥è®°åˆ—è¡¨

**åŠŸèƒ½**ï¼š
- æŒ‰æ—¥æœŸé™åºå±•ç¤ºå†å²æ—¥è®°
- ç‚¹å‡»åˆ‡æ¢æŸ¥çœ‹ä¸åŒæ—¥æœŸ
- æ˜¾ç¤ºæ—¥è®°æ ‡é¢˜å’Œæ—¥æœŸ
- é«˜äº®å½“å‰é€‰ä¸­æ—¥è®°

#### DiaryContent.vue
**ç›®æ ‡**ï¼šä¸­é—´æ—¥è®°å†…å®¹åŒº

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤º 6 ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š
  1. ä»Šæ—¥å¿ƒæƒ…å…³é”®è¯ï¼ˆ3 ä¸ªï¼‰
  2. æƒ…ç»ªå˜åŒ–è¶‹åŠ¿
  3. ä»Šæ—¥å¿ƒæƒ…å°ç»“
  4. å°å°è§‰å¯Ÿ
  5. æ¸©æŸ”å°ç»ƒä¹ 
  6. ä»Šæ—¥å¯„è¯­

#### MoodRadar.vue
**ç›®æ ‡**ï¼šå³ä¾§æƒ…ç»ªé›·è¾¾å›¾

**åŠŸèƒ½**ï¼š
- ç»˜åˆ¶ 6 ç»´åº¦é›·è¾¾å›¾
- æ˜¾ç¤ºæƒ…ç»ªå æ¯”
- é¼ æ ‡æ‚¬åœæ˜¾ç¤ºæ•°å€¼
- å¯¹åº”é¢œè‰²å’Œå›¾ä¾‹

#### MoodStats.vue
**ç›®æ ‡**ï¼šæƒ…ç»ªç»Ÿè®¡ç»„ä»¶

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºæ¯ä¸ªæƒ…ç»ªç»´åº¦çš„æ¯”ä¾‹
- é¢œè‰²æ–¹å—ç¤ºæ„
- ç™¾åˆ†æ¯”æ˜¾ç¤º

### 3.3 é¡µé¢ï¼špages/diary.vue

**åŠŸèƒ½**ï¼š
- æ—¥è®°é¡µé¢ä¸»ä½“
- ä¸‰åˆ—å¸ƒå±€ï¼ˆåˆ—è¡¨ã€å†…å®¹ã€å›¾è¡¨ï¼‰
- æ—¥æœŸåˆ‡æ¢é€»è¾‘
- åŠ è½½å’Œç¼“å­˜ç®¡ç†

### 3.4 çŠ¶æ€ç®¡ç† (DiaryStore)

```typescript
interface DiaryRecord {
  id: string;
  date: string;                    // YYYY-MM-DD
  characterId: string;             // å¯¹è¯è§’è‰²
  moodKeywords: [string, string, string];  // 3ä¸ªå…³é”®è¯
  emotionScores: EmotionScores;   // 6ç»´åº¦è¯„åˆ†
  moodSummary: string;            // å¿ƒæƒ…å°ç»“
  trendAnalysis: string;          // æƒ…ç»ªå˜åŒ–è¶‹åŠ¿
  insights: string;               // å°å°è§‰å¯Ÿ
  practice: string;               // æ¸©æŸ”å°ç»ƒä¹ 
  message: string;                // ä»Šæ—¥å¯„è¯­
  createdAt: number;
}

interface DiaryState {
  diaries: Map<string, DiaryRecord>;    // æŒ‰æ—¥æœŸå­˜å‚¨
  currentDate: string;                  // å½“å‰æŸ¥çœ‹çš„æ—¥æœŸ
  isLoading: boolean;                   // åŠ è½½ä¸­
  error?: string;
}

interface DiaryGetters {
  currentDiary?: DiaryRecord;
  diaryDates: string[];              // æ‰€æœ‰æ—¥è®°æ—¥æœŸ
  sortedDiaries: DiaryRecord[];     // æŒ‰æ—¶é—´æ’åº
}

interface DiaryActions {
  setDiaries(diaries: DiaryRecord[]): void;
  setCurrentDate(date: string): void;
  setLoading(loading: boolean): void;
}
```

**æ•°æ®æ¥æº**ï¼š
- æ—¥è®°æ•°æ®ç”±åç«¯ç”Ÿæˆå’Œå­˜å‚¨
- å‰ç«¯ä»åç«¯ API åŠ è½½
- å‰ç«¯ä»…ç”¨äºæ˜¾ç¤ºï¼Œä¸ä¿®æ”¹æˆ–ç”Ÿæˆ
```

### 3.5 ä¸šåŠ¡é€»è¾‘ (useDiary)

**ä¸»è¦å‡½æ•°**ï¼š
```typescript
// åŠ è½½æ—¥è®°åˆ—è¡¨
async function loadDiaries(): Promise<void>

// è·å–ç‰¹å®šæ—¥æœŸçš„æ—¥è®°
async function getDiary(date: string): Promise<DiaryRecord>
```

**æ•°æ®æµå‘**ï¼š
- å‰ç«¯è¯·æ±‚åç«¯ API â†’ è·å–æ—¥è®°åˆ—è¡¨
- åç«¯è¿”å›æ—¥è®°æ•°æ® â†’ å­˜å‚¨åˆ° DiaryStore
- å‰ç«¯æ˜¾ç¤ºæ—¥è®°å†…å®¹

### 3.6 å…³é”®è¯æå–è§„åˆ™ï¼ˆåç«¯å®ç°ï¼‰

**è¯´æ˜**ï¼šå…³é”®è¯æå–ç”±åç«¯å®ç°ï¼Œå‰ç«¯ä»…ç”¨äºæ˜¾ç¤º

åç«¯åœ¨ç”Ÿæˆæ—¥è®°æ—¶å·²è¿›è¡Œå…³é”®è¯æå–ï¼Œå‰ç«¯ç›´æ¥ä½¿ç”¨ `moodKeywords` å­—æ®µã€‚

### 3.7 äº¤äº’æµç¨‹

```
ç”¨æˆ·è¿›å…¥æ—¥è®°é¡µé¢
  â†“
åŠ è½½æ‰€æœ‰æ—¥è®°åˆ—è¡¨
  â†“
é»˜è®¤æ˜¾ç¤ºæœ€æ–°æ—¥æœŸçš„æ—¥è®°
  â†“
ç”¨æˆ·ç‚¹å‡»åˆ—è¡¨ä¸­æ—¥æœŸ
  â†“
åŠ è½½è¯¥æ—¥æœŸçš„æ—¥è®°å†…å®¹
  â†“
æ˜¾ç¤ºï¼š
  â”œâ”€ ä¸­é—´åŒºåŸŸï¼š6 ä¸ªå†…å®¹æ¨¡å—
  â”œâ”€ å³ä¾§ï¼šé›·è¾¾å›¾
  â””â”€ å·¦ä¾§ï¼šæ—¥æœŸåˆ—è¡¨é«˜äº®
  â†“
ç”¨æˆ·æŸ¥çœ‹å®Œæˆ
```

---

## 4. å…¬å…±ç»„ä»¶æ¨¡å— (Common Components)

### 4.1 Navigation.vue
**èŒè´£**ï¼šé¡¶éƒ¨å¯¼èˆªæ 

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºåº”ç”¨åç§° "Emo AI will always be with you"
- ä¸¤ä¸ªèœå•é¡¹ï¼š"Talk With Us" å’Œ "Emotional Diary"
- å¯¼èˆªåˆ°å¯¹åº”é¡µé¢
- å½“å‰é¡µé¢é«˜äº®

### 4.2 Modal.vue
**èŒè´£**ï¼šé€šç”¨å¼¹çª—æ¡†æ¶

**åŠŸèƒ½**ï¼š
- è‡ªå®šä¹‰å¼¹çª—å®¹å™¨
- æ˜¾ç¤º/éšè—åŠ¨ç”»
- å…³é—­æŒ‰é’®
- èƒŒæ™¯é®ç½©ç‚¹å‡»å…³é—­

### 4.3 CrisisAlert.vue
**èŒè´£**ï¼šå±æœºå¹²é¢„æç¤º

**åŠŸèƒ½**ï¼šï¼ˆè¯¦è§èŠå¤©æ¨¡å—ï¼‰

### 4.4 LoadingSpinner.vue
**èŒè´£**ï¼šåŠ è½½åŠ¨ç”»

**åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºåŠ è½½ä¸­çŠ¶æ€
- è‡ªå®šä¹‰å¤§å°å’Œé¢œè‰²

---

## 5. æ¨¡å—é—´é€šä¿¡

### 5.1 çŠ¶æ€æµå‘

```
é¦–é¡µé€‰æ‹©è§’è‰²
  â†“
ä¿å­˜åˆ° UserStore
  â†“
å¯¼èˆªåˆ°èŠå¤©é¡µé¢
  â†“
è¯»å– UserStore çš„è§’è‰²ä¿¡æ¯
  â†“
åˆå§‹åŒ– ChatStore
  â†“
ç”¨æˆ·èŠå¤©è¿‡ç¨‹ä¸­
  â†“
å®æ—¶æ›´æ–° ChatStore å’Œæƒ…ç»ªæ•°æ®
  â†“
åˆ‡æ¢åˆ°æ—¥è®°é¡µé¢
  â†“
è¯»å– ChatStore ä¸­çš„æ¶ˆæ¯
  â†“
ç”Ÿæˆ DiaryStore ä¸­çš„æ—¥è®°
```

### 5.2 äº‹ä»¶é€šä¿¡

```
é¦–é¡µ
  â”‚
  â”œâ”€ ç‚¹å‡»è§’è‰²å¡ç‰‡
  â”‚   â””â”€ emit: character-selected
  â”‚       â””â”€ ä¿å­˜åˆ° UserStore
  â”‚       â””â”€ å¯¼èˆªåˆ°èŠå¤©é¡µé¢
  â”‚
èŠå¤©é¡µé¢
  â”‚
  â”œâ”€ å‘é€æ¶ˆæ¯
  â”‚   â””â”€ emit: message-sent
  â”‚       â””â”€ è°ƒç”¨ AI æœåŠ¡
  â”‚       â””â”€ æ›´æ–° ChatStore
  â”‚
  â”œâ”€ æ£€æµ‹åˆ°å±æœºä¿¡å·
  â”‚   â””â”€ emit: crisis-detected
  â”‚       â””â”€ æ˜¾ç¤º CrisisAlert
  â”‚
æ—¥è®°é¡µé¢
  â”‚
  â””â”€ ç‚¹å‡»æ—¥æœŸ
      â””â”€ åŠ è½½å¯¹åº”æ—¥è®°
```

---

## 6. æ¨¡å—å¼€å‘é¡ºåº

å»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºå¼€å‘å„æ¨¡å—ï¼š

| é¡ºåº | æ¨¡å— | ä¾èµ– | æ—¶é—´ |
|------|------|------|------|
| 1 | é¦–é¡µ + å…¬å…±ç»„ä»¶ | æ—  | 2 å¤© |
| 2 | èŠå¤©æ¨¡å—ï¼ˆUIï¼‰ | é¦–é¡µ | 3 å¤© |
| 3 | AI æœåŠ¡ + èŠå¤©é€»è¾‘ | èŠå¤© UI | 4 å¤© |
| 4 | æ—¥è®°æ¨¡å— | èŠå¤©æ¨¡å— | 3 å¤© |
| 5 | é›†æˆæµ‹è¯•å’Œä¼˜åŒ– | å…¨éƒ¨ | 2 å¤© |

---

## 7. ä¸‹ä¸€æ­¥é˜…è¯»

- ğŸ“„ [æ•°æ®æ¨¡å‹](./data-models.md) - è¯¦ç»†çš„ç±»å‹å®šä¹‰
- ğŸ“„ [å¼€å‘æŒ‡å—](./development-guide.md) - ç¼–ç è§„èŒƒå’Œå¼€å‘å»ºè®®
- ğŸ“„ å„æ¨¡å—è¯¦ç»†æ–‡æ¡£ (modules ç›®å½•)
