# EmoAI åç«¯ API Reference

**ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ19æ—¥  
**åŸºç¡€è·¯å¾„**: `/api`

---

## 1. æ¦‚è¿°

EmoAI åç«¯æä¾› 2 ä¸ªæ ¸å¿ƒæ¥å£ï¼š**æµå¼èŠå¤©**å’Œ**æ—¥è®°ç”Ÿæˆ**ã€‚

### å‰åç«¯èŒè´£

| åŠŸèƒ½ | å‰ç«¯ | åç«¯ |
|------|------|------|
| è§’è‰²æ•°æ® | âœ…  | âœ… |
| èŠå¤©å†å² | âœ…  | âœ… |
| æ—¥è®°åˆ—è¡¨ | âœ…  | âœ… |
| AI èŠå¤© | - | âœ… |
| æ—¥è®°ç”Ÿæˆ | - | âœ… |

---

## 2. é€šç”¨è§„èŒƒ

### å“åº”æ ¼å¼
```typescript
{ code: number, message: string, data?: T, timestamp: number }
```

### æ—¶é—´æ ¼å¼
- æ—¶é—´æˆ³ï¼šUnix æ¯«ç§’ (number)
- æ—¥æœŸï¼š`YYYY-MM-DD` (string)

---

## 3. èŠå¤©æ¥å£

### POST /api/chat/stream

**è¯·æ±‚å‚æ•°**

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| characterName | string | âœ… | è§’è‰²å (Maya/Atlas/Aurora) |
| message | string | âœ… | ç”¨æˆ·æ¶ˆæ¯ |
| conversationHistory | array | âŒ | ä¼šè¯å†å² `[{role, content}, ...]` |

**å“åº”æ ¼å¼**

æµå¼æ–‡æœ¬ï¼Œä½¿ç”¨ `<<<EMOTION_ANALYSIS>>>` åˆ†éš”AIå›å¤å’Œæƒ…ç»ªæ•°æ®ï¼š

```
AIå›å¤æ–‡æœ¬...

<<<EMOTION_ANALYSIS>>>
{æƒ…ç»ªåˆ†æJSON}
```

**æƒ…ç»ªæ•°æ®å­—æ®µ**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| primary | string | ä¸»è¦æƒ…ç»ª |
| secondary | string | æ¬¡è¦æƒ…ç»ªï¼ˆå¯é€‰ï¼‰ |
| scores | object | å…­ç»´åº¦åˆ†æ•° (0-10) |
| keywords | array | å…³é”®è¯ |
| crisisDetected | boolean | å±æœºæ£€æµ‹ |

å…­ç»´åº¦ï¼š`happy`, `satisfied`, `calm`, `anxious`, `angry`, `sad`

**å±æœºå¤„ç†**

å½“ `crisisDetected: true`ï¼Œå‰ç«¯éœ€ï¼šå¼¹çª— â†’ 15ç§’å€’è®¡æ—¶ â†’ æ‹¨æ‰“çƒ­çº¿

---

## 4. æ—¥è®°æ¥å£

### POST /api/diary/generate

**è¯·æ±‚å‚æ•°**

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| date | string | âœ… | æ—¥æœŸ (YYYY-MM-DD) |
| characterName | string | âœ… | è§’è‰²å |
| conversationMessages | array | âœ… | èŠå¤©è®°å½• `[{role, content, timestamp}, ...]` |
| previousDiary | object | âŒ | å‰ä¸€å¤©æ—¥è®°ï¼ˆè¶‹åŠ¿åˆ†æç”¨ï¼‰ |

**è¿”å›æ•°æ®**

| å­—æ®µ | è¯´æ˜ |
|------|------|
| id, date, characterName | åŸºæœ¬ä¿¡æ¯ |
| emotionScores | å…­ç»´åº¦åˆ†æ•° (0-10) |
| moodKeywords | 3ä¸ªå…³é”®è¯ï¼ˆæ•°ç»„ï¼‰ |
| moodSummary | å¿ƒæƒ…å°ç»“ |
| trendAnalysis | æƒ…ç»ªè¶‹åŠ¿ |
| insights | å°å°è§‰å¯Ÿ |
| practice | æ¸©æŸ”ç»ƒä¹  |
| message | ä»Šæ—¥å¯„è¯­ |
| createdAt | æ—¶é—´æˆ³ |

**å…³é”®è¯é€‰å–**

1. åˆ†æ•°é™åºæ’åº
2. å–å‰2å
3. åˆ¤æ–­æ˜¯å¦åŒç±»ï¼ˆæ­£å‘/è´Ÿå‘ï¼‰ï¼š
   - åŒç±» â†’ ç¬¬3ä¸ªä»å¦ä¸€ç±»é€‰æœ€é«˜åˆ†
   - ä¸åŒç±» â†’ ç›´æ¥é€‰ç¬¬3å

åˆ†ç±»ï¼šæ­£å‘ (happy/satisfied/calm) | è´Ÿå‘ (anxious/angry/sad)

---

## 5. é”™è¯¯ç 

### HTTP çŠ¶æ€ç 
200 æˆåŠŸ | 400 å‚æ•°é”™è¯¯ | 429 è¯·æ±‚é¢‘ç¹ | 500 æœåŠ¡å™¨é”™è¯¯

### ä¸šåŠ¡é”™è¯¯ç 

| ç  | è¯´æ˜ |
|----|------|
| 1001 | æ¶ˆæ¯ä¸ºç©º |
| 1002 | æ¶ˆæ¯è¿‡é•¿(>10000) |
| 1003 | è§’è‰²åæ— æ•ˆ |
| 2001 | æ—¥è®°ç”Ÿæˆå¤±è´¥ |
| 2002 | æ—¥æœŸæ ¼å¼é”™è¯¯ |
| 2003 | èŠå¤©è®°å½•ä¸ºç©º |
| 3001-3003 | AIæœåŠ¡/æµå¼/æƒ…ç»ªåˆ†æ å¤±è´¥ |

---

## 6. é™„å½•

**AI è§’è‰²**  
Maya (æ¸©æŸ”å¯¼å¸ˆ) | Atlas (ç†æ€§åˆ†æå¸ˆ) | Aurora (ç§¯æé™ªä¼´è€…)

**æƒ…ç»ªç±»å‹**  
happyå¼€å¿ƒ | satisfiedæ»¡è¶³ | calmå¹³é™ | anxiousç„¦è™‘ | angryæ„¤æ€’ | sadæ‚²ä¼¤

**å±æœºå…³é”®è¯**  
ä¸­æ–‡ï¼šæƒ³ç»“æŸä¸€åˆ‡ã€ä¸æƒ³æ´»äº†  
è‹±æ–‡ï¼šwant to end it allã€life is meaningless

**ç´§æ€¥çƒ­çº¿**  
ğŸ‡¨ğŸ‡³ 110/12320 | ğŸ‡¬ğŸ‡§ 999/116123 | ğŸ‡ºğŸ‡¸ 911/988 | ğŸ‡¯ğŸ‡µ 110

**é€Ÿç‡é™åˆ¶**  
èŠå¤© 20æ¬¡/åˆ†é’Ÿ | æ—¥è®° 10æ¬¡/åˆ†é’Ÿ

---

**v1.0.0** (2025-10-19) | [GitHub](https://github.com/neverbiasu/emoai-app)
